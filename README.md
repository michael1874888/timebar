# TimeBar v3.2 â±ï¸ğŸ’°ğŸ®

> æŠŠæ¯ä¸€ç­†æ¶ˆè²»è½‰æ›æˆã€Œé€€ä¼‘æ™‚é–“æˆæœ¬ã€ï¼ŒçµåˆéŠæˆ²åŒ–æ©Ÿåˆ¶ï¼Œè®“ä½ åœ¨æ¨‚è¶£ä¸­é¤Šæˆç†è²¡ç¿’æ…£ã€‚

## ğŸ‰ v3.2 é‡å¤§æ›´æ–° (feature/TrackSpending)

### ğŸ® éŠæˆ²åŒ–ç³»çµ±
- **ç©åˆ†ç³»çµ±**ï¼šå®ŒæˆæŒ‘æˆ°ã€è¨˜å¸³ã€å­˜éŒ¢éƒ½èƒ½ç²å¾—ç©åˆ†
- **é“å…·å•†åº—**ï¼šä½¿ç”¨ç©åˆ†è³¼è²·å…ç½ªå¡ç­‰å¯¦ç”¨é“å…·
- **æ¯æ—¥æŒ‘æˆ°å‡ç´š**ï¼šæ”¯æ´è‡ªè¨‚æŒ‘æˆ°ã€ç·¨è¼¯é è¨­æŒ‘æˆ°
- **æŒ‘æˆ°è¨­å®šé é¢**ï¼šå®Œæ•´çš„æŒ‘æˆ°ç®¡ç†ä»‹é¢

### ğŸ“Š åˆ†é¡ç®¡ç†ç³»çµ±
- **8 å€‹é è¨­åˆ†é¡**ï¼šé£²é£Ÿã€äº¤é€šã€å¨›æ¨‚ã€å±…ä½ã€å¥åº·ã€å­¸ç¿’ã€è¨‚é–±ã€å…¶ä»–
- **è‡ªè¨‚åˆ†é¡**ï¼šæ–°å¢å°ˆå±¬çš„æ¶ˆè²»é¡åˆ¥
- **åˆ†é¡å¯è¦‹æ€§**ï¼šéš±è—ä¸éœ€è¦çš„åˆ†é¡
- **åˆ†é¡è¨­å®šé é¢**ï¼šè¦–è¦ºåŒ–ç®¡ç†æ‰€æœ‰åˆ†é¡

### âš¡ å¿«é€Ÿè¨˜å¸³
- **å¿«é€Ÿå‹•ä½œæŒ‰éˆ•**ï¼šä¸€éµè¨˜éŒ„å¸¸è¦‹æ¶ˆè²»ï¼ˆæ—©é¤ã€åˆé¤ã€äº¤é€šç­‰ï¼‰
- **è‡ªè¨‚å¿«æ·éµ**ï¼šè¨­å®šå€‹äººåŒ–çš„å¿«é€Ÿè¨˜å¸³é …ç›®
- **æ¯æ—¥é ç®—å°å·¥å…·**ï¼šå³æ™‚é¡¯ç¤ºä»Šæ—¥å‰©é¤˜é ç®—

### ğŸ”„ è¨‚é–±ç®¡ç†
- **è¨‚é–±ç®¡ç†é é¢**ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰é€±æœŸæ€§æ”¯å‡º
- **æŒ‰é¡åˆ¥åˆ†çµ„**ï¼šæ¸…æ¥šçœ‹åˆ°å„é¡è¨‚é–±æœå‹™
- **ä¸€éµç·¨è¼¯/åˆªé™¤**ï¼šè¼•é¬†ç®¡ç†è¨‚é–±é …ç›®

### ğŸ—ï¸ ç³»çµ±æ¶æ§‹é‡æ§‹ (v2.3)
- **ä¾è³´æ³¨å…¥æ¶æ§‹**ï¼šSettingsSystem å’Œ CategorySystem é‡æ§‹
- **ç´”å‡½æ•¸è¨­è¨ˆ**ï¼šæå‡å¯æ¸¬è©¦æ€§å’Œç¶­è­·æ€§
- **æ¥å£æŠ½è±¡å±¤**ï¼šIStorage, ICloudSync, IDebouncer
- **é©é…å™¨æ¨¡å¼**ï¼šStorageAdapter, GoogleSheetsAdapter
- **æ¶ˆé™¤å…¨å±€ç‹€æ…‹**ï¼šä½¿ç”¨ Debouncer å°è£è¨ˆæ™‚å™¨é‚è¼¯

### âœ¨ UI/UX å¢å¼·
- **Toast ä½‡åˆ—ç³»çµ±**ï¼šå¤šæ¢é€šçŸ¥è‡ªå‹•æ’éšŠé¡¯ç¤º
- **è¦ºå¯Ÿæé†’å‹•ç•«**ï¼šæ¶ˆè²»æ™‚çš„è¦–è¦ºæé†’
- **ç©åˆ†ç²’å­å‹•ç•«**ï¼šç²å¾—ç©åˆ†æ™‚çš„æ…¶ç¥æ•ˆæœ
- **ç·¨è¼¯è¨˜éŒ„åŠŸèƒ½**ï¼šä¿®æ­£éŒ¯èª¤çš„æ¶ˆè²»è¨˜éŒ„
- **æ”¹é€²çš„è¡¨å–®é©—è­‰**ï¼šé˜²æ­¢é‡è¤‡æäº¤

### ğŸ§ª æ¸¬è©¦è¦†è“‹å¢åŠ 
- **æ–°å¢ settingsSystem.test.ts**ï¼š9 å€‹æ¸¬è©¦
- **æ–°å¢ categorySystem.test.ts**ï¼š21 å€‹æ¸¬è©¦
- **ç¸½æ¸¬è©¦æ•¸**ï¼šå¾ 90 å¢åŠ åˆ° **120 å€‹æ¸¬è©¦**
- **æ¸¬è©¦é€šéç‡**ï¼š100%

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### è²¡å‹™è¨ˆç®—
- **æ™‚é–“æˆæœ¬è½‰æ›**ï¼šå°‡æ¯ç­†èŠ±è²»/å„²è“„è½‰æ›ç‚ºã€Œå»¶å¾Œ/ææ—©é€€ä¼‘ã€çš„å¤©æ•¸
- **è¤‡åˆ©è¨ˆç®—**ï¼šè€ƒæ…®é€šè†¨ç‡å’ŒæŠ•è³‡å ±é…¬ç‡ï¼Œè¨ˆç®—å¯¦è³ªå ±é…¬ç‡
- **é€±æœŸæ€§æ”¯å‡º**ï¼šä¸€æ¬¡æ€§ vs æ¯æœˆå›ºå®šæ”¯å‡ºï¼Œå±•ç¤ºè¨‚é–±æœå‹™çš„çœŸæ­£ä»£åƒ¹

### GPS å°èˆªç³»çµ±
- **ç›®æ¨™ vs é ä¼°**ï¼šç›®æ¨™é€€ä¼‘å¹´é½¡å›ºå®šï¼Œé ä¼°å¹´é½¡æ ¹æ“šè¡Œç‚ºå‹•æ…‹è¨ˆç®—
- **å³æ™‚åé¥‹**ï¼šæ¯ç­†è¨˜éŒ„éƒ½æœƒæ›´æ–°ã€Œé ˜å…ˆ/è½å¾Œã€ç‹€æ…‹
- **è¦–è¦ºåŒ–é€²åº¦æ¢**ï¼šç›´è§€é¡¯ç¤ºèˆ‡ç›®æ¨™çš„å·®è·
- **ç”Ÿå‘½é›»æ± **ï¼šå°‡äººç”Ÿä»¥é›»æ± å‘ˆç¾ï¼Œå³æ™‚çœ‹åˆ°æ¶ˆè²»å°è‡ªç”±æ™‚é–“çš„å½±éŸ¿

### é€€ä¼‘è¨ˆç®—æ©Ÿï¼ˆè¨­å®šé ï¼‰
- **å¹´é½¡å°å‘**ï¼šè¨­å®šé€€ä¼‘å¹´é½¡ï¼Œè¨ˆç®—å¯ç´¯ç©å¤šå°‘é€€ä¼‘é‡‘
- **é‡‘é¡å°å‘**ï¼šè¨­å®šç›®æ¨™é‡‘é¡ï¼Œè¨ˆç®—éœ€è¦å·¥ä½œåˆ°å¹¾æ­²
- **ç”Ÿæ´»å“è³ªå°å‘**ï¼šè¨­å®šé€€ä¼‘å¾Œæœˆé ˜é‡‘é¡ï¼Œè¨ˆç®—æ‰€éœ€å­˜æ¬¾ï¼ˆ4%æ³•å‰‡ï¼‰

### è¨˜éŒ„è¿½è¹¤
- ğŸ’¸ **èŠ±è²»è¨˜éŒ„**ï¼šè¿½è¹¤æ¶ˆè²»ä¸¦çœ‹åˆ°å°é€€ä¼‘çš„å½±éŸ¿
- ğŸ’° **å„²è“„è¨˜éŒ„**ï¼šè¨˜éŒ„æ¯ç­†å„²è“„ï¼Œçœ‹è‘—é€€ä¼‘æ—¥æœŸæå‰
- ğŸ“Š **æ­·å²çµ±è¨ˆ**ï¼šæŒ‰æœˆåˆ†çµ„æŸ¥çœ‹ï¼Œç´¯ç©é€²åº¦ä¸€ç›®ç­ç„¶
- âœï¸ **ç·¨è¼¯åŠŸèƒ½**ï¼šä¿®æ­£éŒ¯èª¤çš„è¨˜éŒ„

### è³‡æ–™å„²å­˜
- ğŸ“± **æœ¬åœ°å„²å­˜**ï¼šä½¿ç”¨ localStorageï¼Œé—œé–‰ç€è¦½å™¨ä¹Ÿä¸æœƒéºå¤±
- â˜ï¸ **é›²ç«¯åŒæ­¥**ï¼šé€£æ¥ Google Sheetsï¼Œè·¨è£ç½®è‡ªå‹•åŒæ­¥
- ğŸ”„ **çµ±ä¸€è¨­å®šç®¡ç†**ï¼šSettingsSystem çµ±ä¸€ç®¡ç†æ‰€æœ‰è¨­å®šèˆ‡åŒæ­¥

---

## ğŸ§ª æ¸¬è©¦

æ¡ç”¨**ç²¾ç°¡æ¸¬è©¦ç­–ç•¥**ï¼Œå°ˆæ³¨æ–¼æ ¸å¿ƒé‚è¼¯å’Œé›†æˆæ¸¬è©¦ï¼š

```bash
# åŸ·è¡Œ 120 å€‹æ¸¬è©¦
npm test

# åŸ·è¡Œçµæœ
# âœ… 120 é€šé (4 å€‹æ¸¬è©¦æ–‡ä»¶)
# âš¡ æ¸¬è©¦æ™‚é–“: ~23 ç§’
```

**æ¸¬è©¦è¦†è“‹ï¼š**
- âœ… **financeCalc.test.ts** (56 tests) - æ ¸å¿ƒè²¡å‹™è¨ˆç®—é‚è¼¯
  - è¤‡åˆ©è¨ˆç®—ã€å¹´é‡‘è¨ˆç®—ã€4% æ³•å‰‡
  - æ™‚é–“æ ¼å¼åŒ–ã€GPS é€€ä¼‘å¹´é½¡é ä¼°
  - é‚Šç•Œæ¡ˆä¾‹å’Œæ•¸å€¼ç²¾åº¦

- âœ… **App.test.tsx** (34 tests) - ç«¯åˆ°ç«¯é›†æˆæ¸¬è©¦
  - å®Œæ•´ç”¨æˆ¶æµç¨‹ï¼šOnboarding â†’ Dashboard â†’ è¨˜å¸³ â†’ æ­·å² â†’ è¨­å®š
  - å°èˆªå’Œç‹€æ…‹ç®¡ç†
  - Google Sheets åŒæ­¥
  - éŒ¯èª¤è™•ç†å’Œé‚Šç·£æƒ…æ³

- âœ… **settingsSystem.test.ts** (9 tests) - è¨­å®šç³»çµ±æ¸¬è©¦
  - æœ¬åœ°å­˜å„²æ“ä½œ
  - Debounce æ©Ÿåˆ¶ï¼ˆ1ç§’å»¶é²ã€æ‰¹æ¬¡åŒæ­¥ï¼‰
  - é›²ç«¯åŒæ­¥ï¼ˆsyncFromCloud, forceSyncToCloudï¼‰
  - éŒ¯èª¤è™•ç†

- âœ… **categorySystem.test.ts** (21 tests) - åˆ†é¡ç³»çµ±æ¸¬è©¦
  - é è¨­åˆ†é¡é©—è­‰
  - è‡ªè¨‚åˆ†é¡ CRUD æ“ä½œ
  - åˆ†é¡å¯è¦‹æ€§åˆ‡æ›
  - èˆ‡ SettingsSystem çš„æ•´åˆ

**æ¸¬è©¦å“²å­¸ï¼š**
> ä¸æ¸¬è©¦ UI å¯¦ç¾ç´°ç¯€ï¼Œåªæ¸¬è©¦æ ¸å¿ƒæ¥­å‹™é‚è¼¯å’Œç”¨æˆ¶é—œéµæµç¨‹ã€‚
> ä¿æŒæ¸¬è©¦ç©©å®šï¼Œé¿å…å›  UI èª¿æ•´è€Œé »ç¹ä¿®æ”¹æ¸¬è©¦ã€‚

**æ¶æ§‹æ¸¬è©¦ï¼š**
- âœ… ä¾è³´æ³¨å…¥æ¶æ§‹é©—è­‰
- âœ… ç´”å‡½æ•¸è¡Œç‚ºæ¸¬è©¦
- âœ… æ¥å£æŠ½è±¡æ­£ç¢ºæ€§
- âœ… å‘å¾Œå…¼å®¹æ€§ä¿è­‰

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
timebar/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # React å…ƒä»¶ (TypeScript)
â”‚   â”‚   â”œâ”€â”€ App.tsx              # ä¸»æ‡‰ç”¨
â”‚   â”‚   â”œâ”€â”€ App.test.tsx         # é›†æˆæ¸¬è©¦ï¼ˆ34 å€‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ AwarenessParticles.tsx     # ğŸ†• è¦ºå¯Ÿæé†’å‹•ç•«
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ CelebrationModal.tsx  # æ…¶ç¥å½ˆçª—
â”‚   â”‚   â”‚   â”œâ”€â”€ Toast.tsx             # ğŸ”„ Toast ä½‡åˆ—ç³»çµ±
â”‚   â”‚   â”‚   â””â”€â”€ PointsParticles.tsx   # ğŸ†• ç©åˆ†ç²’å­å‹•ç•«
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardScreen.tsx   # ğŸ”„ æ”¹é€²è¡¨å–®é©—è­‰
â”‚   â”‚   â”‚   â”œâ”€â”€ LifeBattery.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DailyChallenge.tsx    # ğŸ”„ æ”¯æ´è‡ªè¨‚æŒ‘æˆ°
â”‚   â”‚   â”‚   â”œâ”€â”€ DailyBudgetWidget.tsx # ğŸ†• æ¯æ—¥é ç®—å°å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ QuickActionsBar.tsx   # ğŸ†• å¿«é€Ÿè¨˜å¸³æŒ‰éˆ•
â”‚   â”‚   â”‚   â””â”€â”€ CatchUpPlan.tsx
â”‚   â”‚   â”œâ”€â”€ shop/
â”‚   â”‚   â”‚   â”œâ”€â”€ ShopPage.tsx          # ğŸ†• é“å…·å•†åº—
â”‚   â”‚   â”‚   â””â”€â”€ ItemCard.tsx          # ğŸ†• å•†å“å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â”‚   â””â”€â”€ OnboardingScreen.tsx
â”‚   â”‚   â”œâ”€â”€ tracker/
â”‚   â”‚   â”‚   â””â”€â”€ MainTracker.tsx       # ğŸ”„ æ•´åˆåˆ†é¡ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ history/
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryPage.tsx       # ğŸ”„ æ–°å¢ç·¨è¼¯åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ EditRecordModal.tsx   # ğŸ†• ç·¨è¼¯è¨˜éŒ„å½ˆçª—
â”‚   â”‚   â”‚   â””â”€â”€ CategoryPieChart.tsx
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CategorySettingsPage.tsx        # ğŸ†• åˆ†é¡è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ ChallengeSettingsPage.tsx       # ğŸ†• æŒ‘æˆ°è¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ QuickActionsSettingsPage.tsx    # ğŸ†• å¿«æ·éµè¨­å®š
â”‚   â”‚   â””â”€â”€ subscription/
â”‚   â”‚       â””â”€â”€ SubscriptionManagerPage.tsx      # ğŸ†• è¨‚é–±ç®¡ç†
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ googleSheets.ts      # ğŸ”„ API æœå‹™æ›´æ–°
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ financeCalc.ts       # æ ¸å¿ƒè¨ˆç®—é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ lifeCostCalc.ts      # ç”Ÿå‹•æ¯”å–»è¨ˆç®—
â”‚   â”‚   â”œâ”€â”€ storage.ts           # localStorage å°è£
â”‚   â”‚   â”œâ”€â”€ settingsSystem.ts    # ğŸ†• v2.3 çµ±ä¸€è¨­å®šç®¡ç†
â”‚   â”‚   â”œâ”€â”€ categorySystem.ts    # ğŸ†• v2.3 åˆ†é¡ç®¡ç†ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ categoryMapping.ts   # ğŸ†• åˆ†é¡æ˜ å°„å·¥å…·
â”‚   â”‚   â”œâ”€â”€ recordSystem.ts      # ğŸ†• è¨˜éŒ„ç®¡ç†ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ pointsSystem.ts      # ğŸ†• ç©åˆ†ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ inventorySystem.ts   # ğŸ†• é“å…·åº«å­˜ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ interfaces.ts        # ğŸ†• æŠ½è±¡æ¥å£å®šç¾©
â”‚   â”‚   â”œâ”€â”€ adapters.ts          # ğŸ†• é©é…å™¨å¯¦ç¾
â”‚   â”‚   â”œâ”€â”€ messageFramework.ts  # è¨Šæ¯æ¡†æ¶
â”‚   â”‚   â””â”€â”€ helpers.ts           # UI å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â””â”€â”€ index.ts             # ç’°å¢ƒè®Šæ•¸
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts             # ğŸ”„ é¡å‹å®šç¾©æ“´å……
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ financeCalc.test.ts      # æ ¸å¿ƒé‚è¼¯æ¸¬è©¦ï¼ˆ56 å€‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ settingsSystem.test.ts   # ğŸ†• è¨­å®šç³»çµ±æ¸¬è©¦ï¼ˆ9 å€‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ categorySystem.test.ts   # ğŸ†• åˆ†é¡ç³»çµ±æ¸¬è©¦ï¼ˆ21 å€‹ï¼‰
â”‚   â”‚   â””â”€â”€ setup.ts                 # æ¸¬è©¦ç’°å¢ƒè¨­å®š
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ index.css            # Tailwind + å…¨åŸŸæ¨£å¼
â”‚   â”‚   â””â”€â”€ animations.css       # ğŸ”„ æ–°å¢å‹•ç•«å®šç¾©
â”‚   â”œâ”€â”€ main.tsx                 # React å…¥å£é»
â”‚   â””â”€â”€ vite-env.d.ts            # Vite ç’°å¢ƒé¡å‹
â”œâ”€â”€ google-apps-script/
â”‚   â””â”€â”€ Code.gs                  # ğŸ”„ Google Apps Script å¾Œç«¯æ›´æ–°
â”œâ”€â”€ index.html                   # Vite é–‹ç™¼å…¥å£
â”œâ”€â”€ vite.config.js               # Vite è¨­å®š
â”œâ”€â”€ tailwind.config.js           # Tailwind è¨­å®š
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â”œâ”€â”€ tsconfig.node.json           # TypeScript Node é…ç½®
â”œâ”€â”€ vitest.config.ts             # Vitest æ¸¬è©¦è¨­å®š
â”œâ”€â”€ package.json                 # å°ˆæ¡ˆè¨­å®š
â”œâ”€â”€ .env.local                   # ç’°å¢ƒè®Šæ•¸ï¼ˆä¸æäº¤ï¼‰
â””â”€â”€ README.md
```

---

## ğŸ—ï¸ æ¶æ§‹æ”¹é€² (v2.3)

### ä¾è³´æ³¨å…¥æ¶æ§‹

**æ”¹é€²å‰çš„å•é¡Œï¼š**
- âŒ å…¨å±€ç‹€æ…‹ (syncTimer, pendingSync)
- âŒ ç·Šè€¦åˆ (ç›´æ¥ä¾è³´ Storage, GoogleSheetsAPI)
- âŒ é›£ä»¥æ¸¬è©¦
- âŒ ç›´æ¥ä¿®æ”¹æ•¸çµ„ (push, splice)

**æ”¹é€²å¾Œï¼š**
- âœ… **ä¾è³´æ³¨å…¥**: SettingsService æ¥å— IStorage, ICloudSync
- âœ… **æ¶ˆé™¤å…¨å±€ç‹€æ…‹**: ä½¿ç”¨ Debouncer å°è£è¨ˆæ™‚å™¨é‚è¼¯
- âœ… **ç´”å‡½æ•¸è¨­è¨ˆ**: CategoryService ä½¿ç”¨ä¸å¯è®Šæ“ä½œ
- âœ… **å‘å¾Œå…¼å®¹**: ä¿ç•™éœæ…‹å°å‡ºï¼Œç¾æœ‰ä»£ç¢¼ç„¡éœ€ä¿®æ”¹
- âœ… **æ˜“æ–¼æ¸¬è©¦**: å¯æ³¨å…¥ mock å¯¦ç¾

### æ ¸å¿ƒæ¶æ§‹çµ„ä»¶

```typescript
// æ¥å£å±¤ (interfaces.ts)
interface IStorage {
  save<T>(key: string, value: T): boolean
  load<T>(key: string): T | null
}

interface ICloudSync {
  isConfigured(): boolean
  getUserData(): Promise<{success: boolean; data: any}>
  saveUserData(data: any): Promise<{success: boolean}>
}

interface IDebouncer {
  schedule(callback: () => void | Promise<void>): void
  cancel(): void
  flush(): Promise<void>
}

// é©é…å™¨å±¤ (adapters.ts)
class StorageAdapter implements IStorage { ... }
class GoogleSheetsAdapter implements ICloudSync { ... }

// æœå‹™å±¤ (settingsSystem.ts, categorySystem.ts)
class SettingsService {
  constructor(
    private storage: IStorage,
    private cloudSync: ICloudSync,
    debounceDelay: number = 1000
  ) { ... }
}

class CategoryService {
  constructor(private settingsService: SettingsService) { ... }
}
```

### æ¶æ§‹å„ªå‹¢å°æ¯”

| é …ç›® | èˆŠæ¶æ§‹ | æ–°æ¶æ§‹ |
|------|--------|--------|
| **è€¦åˆåº¦** | ç·Šè€¦åˆ (ç›´æ¥ä¾è³´) | é¬†è€¦åˆ (ä¾è³´æ³¨å…¥) |
| **å¯æ¸¬è©¦æ€§** | å›°é›£ (éœ€ mock æ¨¡çµ„) | ç°¡å–® (æ³¨å…¥ mock) |
| **å…¨å±€ç‹€æ…‹** | æœ‰ (syncTimer) | ç„¡ (å°è£åœ¨ Debouncer) |
| **ä»£ç¢¼é‡è¤‡** | å¤š | å°‘ (æå–å…±ç”¨é‚è¼¯) |
| **ç´”å‡½æ•¸** | éƒ¨åˆ† | å¤§éƒ¨åˆ† |
| **å‘å¾Œå…¼å®¹** | N/A | âœ… 100% å…¼å®¹ |

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹æ³•ä¸€ï¼šæœ¬åœ°é–‹ç™¼ï¼ˆæ¨è–¦ï¼‰

**ç’°å¢ƒéœ€æ±‚**ï¼š
- Node.js 18+ (å»ºè­° 20 LTS)
- npm 9+

**å®‰è£æ­¥é©Ÿ**ï¼š

```bash
# 1. å®‰è£ä¾è³´
npm install

# 2. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆå¯é¸ï¼Œç”¨æ–¼ Google Sheets åŒæ­¥ï¼‰
cp .env.example .env.local
# ç·¨è¼¯ .env.localï¼Œå¡«å…¥ä½ çš„ Google Apps Script URL

# 3. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm run dev

# 4. é–‹å•Ÿç€è¦½å™¨
# http://localhost:5173/timebar/
```

**é–‹ç™¼æŒ‡ä»¤**ï¼š

```bash
npm run dev      # å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆå«ç†±é‡è¼‰ï¼‰
npm run build    # æ‰“åŒ…ç”Ÿç”¢ç‰ˆæœ¬
npm run preview  # é è¦½æ‰“åŒ…çµæœ
npm test         # åŸ·è¡Œ 120 å€‹æ¸¬è©¦
```

### æ–¹æ³•äºŒï¼šGitHub Pages éƒ¨ç½²

1. **Fork é€™å€‹å°ˆæ¡ˆ**
2. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   - åœ¨ Repo â†’ Settings â†’ Secrets â†’ Actions
   - æ–°å¢ `VITE_GAS_URL`ï¼ˆä½ çš„ Google Apps Script URLï¼‰
3. **å•Ÿç”¨ GitHub Pages**
   - Settings â†’ Pages â†’ Source é¸ **GitHub Actions**
4. **Push åˆ° main** â†’ è‡ªå‹•å»ºç½®ä¸¦éƒ¨ç½²
5. **å®Œæˆï¼** è¨ªå• `https://ä½ çš„å¸³è™Ÿ.github.io/timebar/`

### æ–¹æ³•ä¸‰ï¼šæ‰‹å‹•éƒ¨ç½²

```bash
npm run build
# å°‡ dist/ è³‡æ–™å¤¾å…§å®¹éƒ¨ç½²åˆ°ä»»ä½•éœæ…‹ç¶²ç«™æœå‹™
```

---

## â˜ï¸ è¨­å®š Google Sheets é›²ç«¯åŒæ­¥

### æ­¥é©Ÿ 1ï¼šå»ºç«‹ Google Sheets

1. é–‹å•Ÿ [Google Sheets](https://sheets.google.com)
2. å»ºç«‹æ–°çš„ç©ºç™½è©¦ç®—è¡¨
3. **è¤‡è£½è©¦ç®—è¡¨ ID**ï¼ˆå¾ç¶²å€ä¸­å–å¾—ï¼‰ï¼š
   ```
   https://docs.google.com/spreadsheets/d/ã€é€™ä¸€æ®µå°±æ˜¯IDã€‘/edit
   ```
   ä¾‹å¦‚ï¼š`1bJ-plKk3locg4fRWtEcdL5rIgT2KQvEz5Xer1h7--MU`

### æ­¥é©Ÿ 2ï¼šå»ºç«‹ Apps Script

1. åœ¨è©¦ç®—è¡¨ä¸­ï¼Œé»é¸ **æ“´å……åŠŸèƒ½** â†’ **Apps Script**
2. åˆªé™¤é è¨­çš„ç¨‹å¼ç¢¼
3. è¤‡è£½ `google-apps-script/Code.gs` çš„å…§å®¹ä¸¦è²¼ä¸Š
4. **é‡è¦ï¼** åœ¨ç¬¬ 15 è¡Œå¡«å…¥ä½ çš„è©¦ç®—è¡¨ IDï¼š
   ```javascript
   const SPREADSHEET_ID = 'è²¼ä¸Šä½ çš„è©¦ç®—è¡¨ID';
   ```
5. é»æ“Š **å„²å­˜** (Ctrl+S)

### æ­¥é©Ÿ 3ï¼šæ¸¬è©¦é€£æ¥

1. åœ¨å‡½æ•¸ä¸‹æ‹‰é¸å–®é¸æ“‡ `testConnection`
2. é»æ“Š â–¶ï¸ åŸ·è¡Œ
3. é¦–æ¬¡æœƒè¦æ±‚æˆæ¬Šï¼Œé»ã€Œæˆæ¬Šå­˜å–ã€â†’ã€Œç¹¼çºŒã€â†’ é¸æ“‡å¸³è™Ÿ â†’ã€Œå…è¨±ã€
4. æŸ¥çœ‹åŸ·è¡Œç´€éŒ„ï¼Œæ‡‰é¡¯ç¤º `âœ… é€£æ¥æˆåŠŸï¼`

### æ­¥é©Ÿ 4ï¼šéƒ¨ç½²ç‚ºç¶²é æ‡‰ç”¨ç¨‹å¼

1. é»é¸ **éƒ¨ç½²** â†’ **æ–°å¢éƒ¨ç½²ä½œæ¥­**
2. é»æ“Šé½’è¼ªåœ–ç¤ºï¼Œé¸æ“‡ **ç¶²é æ‡‰ç”¨ç¨‹å¼**
3. è¨­å®šï¼š
   - åŸ·è¡Œèº«åˆ†ï¼š**æˆ‘**ï¼ˆä¸è¦æ”¹ï¼‰
   - èª°å¯ä»¥å­˜å–ï¼š**æ‰€æœ‰äºº**
4. é»æ“Š **éƒ¨ç½²**
5. **è¤‡è£½ç”¢ç”Ÿçš„ç¶²å€**

### æ­¥é©Ÿ 5ï¼šé€£æ¥åˆ° TimeBar

**æœ¬åœ°é–‹ç™¼ç’°å¢ƒ**ï¼š
1. ç·¨è¼¯ `.env.local` æª”æ¡ˆ
2. è¨­å®šä½ çš„ URLï¼š
   ```bash
   VITE_GAS_URL=https://script.google.com/macros/s/xxx.../exec
   ```
3. é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼š`npm run dev`

**GitHub Pages éƒ¨ç½²**ï¼š
1. Repo â†’ Settings â†’ Secrets â†’ Actions
2. æ–°å¢ Secretï¼š`VITE_GAS_URL`
3. å€¼å¡«å…¥ä½ çš„ Google Apps Script URL
4. Push åˆ° main åˆ†æ”¯ï¼Œè‡ªå‹•å»ºç½®ä¸¦éƒ¨ç½²

### é©—è­‰æˆåŠŸ

- App è¨­å®šé é¢æœƒé¡¯ç¤ºã€ŒGoogle Sheets å·²é€£æ¥ã€
- è¨˜éŒ„æ¶ˆè²»/å„²è“„å¾Œï¼ŒGoogle Sheets æœƒè‡ªå‹•æ–°å¢è³‡æ–™
- ã€Œæ¶ˆè²»ç´€éŒ„ã€åˆ†é ï¼šç¶ è‰²=å„²è“„ã€ç´…è‰²=èŠ±è²»
- ã€Œä½¿ç”¨è€…è³‡æ–™ã€åˆ†é ï¼šåŒ…å«æ¯æœˆå„²è“„ã€ç›®æ¨™é€€ä¼‘é‡‘ã€é€šè†¨ç‡ã€æŠ•è³‡å ±é…¬ç‡ã€ç©åˆ†ã€é“å…·åº«å­˜ç­‰

> âš ï¸ **å‡ç´šæ³¨æ„**ï¼šå¾ v3.1 å‡ç´šéœ€æ›´æ–° Google Apps Scriptï¼Œä»¥æ”¯æ´æ–°å¢çš„ç©åˆ†ã€é“å…·ã€åˆ†é¡ç­‰åŠŸèƒ½ã€‚

---

## ğŸ§® è¨ˆç®—é‚è¼¯

### å…¬å¼

**ä¸€æ¬¡æ€§æ¶ˆè²»/å„²è“„ï¼š**
```
æœªä¾†åƒ¹å€¼ = é‡‘é¡ Ã— (1 + 3.41%)^è·é›¢é€€ä¼‘å¹´æ•¸
æ™‚é–“æˆæœ¬ = æœªä¾†åƒ¹å€¼ Ã· æ™‚è–ª
```

**æ¯æœˆå›ºå®šæ¶ˆè²»/å„²è“„ï¼š**
```
æœªä¾†åƒ¹å€¼ = æœˆä»˜é‡‘é¡ Ã— ((1 + æœˆå ±é…¬ç‡)^æœˆæ•¸ - 1) Ã· æœˆå ±é…¬ç‡
æ™‚é–“æˆæœ¬ = æœªä¾†åƒ¹å€¼ Ã· æ™‚è–ª
```

### é è¨­åƒæ•¸

| åƒæ•¸ | é è¨­å€¼ | å¯èª¿æ•´ | èªªæ˜ |
|------|--------|--------|------|
| é€šè†¨ç‡ | 2.5% | âœ… 0-10% | é•·æœŸå¹³å‡ |
| æŠ•è³‡å ±é…¬ç‡ | 6% | âœ… 0-15% | å¤§ç›¤é•·æœŸå¹³å‡ |
| å¯¦è³ªå ±é…¬ç‡ | â‰ˆ3.41% | è‡ªå‹•è¨ˆç®— | (1+ROI)/(1+é€šè†¨)-1 |
| æ¯æœˆå·¥ä½œå¤©æ•¸ | 22 å¤© | âŒ | - |
| æ¯æ—¥å·¥æ™‚ | 8 å°æ™‚ | âŒ | - |

---

## ğŸ® éŠæˆ²åŒ–æ©Ÿåˆ¶

### ç©åˆ†ç³»çµ±
- **å®ŒæˆæŒ‘æˆ°**ï¼š+30 ç©åˆ†
- **è¨˜éŒ„æ¶ˆè²»**ï¼š+5 ç©åˆ†
- **è¨˜éŒ„å„²è“„**ï¼š+10 ç©åˆ†
- **è³¼è²·é“å…·**ï¼šæ¶ˆè€—ç©åˆ†

### é“å…·ç³»çµ±
- **å…ç½ªå¡** (30ç©åˆ†)ï¼šè±å…ä¸€æ¬¡è¶…æ”¯ï¼Œä¸å½±éŸ¿é ç®—çµ±è¨ˆ

### æŒ‘æˆ°ç³»çµ±
- **4 å€‹é è¨­æŒ‘æˆ°**ï¼š
  1. å–æ°´å–ä»£é£²æ–™
  2. è‡ªå·±ç…®é£¯
  3. æ­¥è¡Œæˆ–é¨è»Šé€šå‹¤
  4. å–„ç”¨å®¶è£¡ç‰©å“
- **è‡ªè¨‚æŒ‘æˆ°**ï¼šå‰µå»ºå€‹äººåŒ–çš„æŒ‘æˆ°ç›®æ¨™
- **ç·¨è¼¯é è¨­æŒ‘æˆ°**ï¼šèª¿æ•´æŒ‘æˆ°å…§å®¹å’Œçå‹µ

---

## â“ å¸¸è¦‹å•é¡Œ

### Q: Google Sheets æ²’æœ‰æ›´æ–°ï¼Ÿ
1. ç¢ºèª `SPREADSHEET_ID` æ˜¯å¦æ­£ç¢ºå¡«å…¥
2. ç¢ºèªéƒ¨ç½²å¾Œæœ‰é¸æ“‡ã€Œæ–°ç‰ˆæœ¬ã€
3. åŸ·è¡Œ `testConnection` æ¸¬è©¦é€£æ¥
4. æª¢æŸ¥ Apps Script æ˜¯å¦ç‚ºæœ€æ–°ç‰ˆæœ¬

### Q: æ¯æ¬¡è¨˜éŒ„æœƒè§¸ç™¼å…©å€‹è«‹æ±‚ï¼Ÿ
æ­£å¸¸ï¼ä¸€å€‹å„²å­˜ä½¿ç”¨è€…è³‡æ–™ï¼ˆåŒ…å«ç©åˆ†ã€é“å…·ç­‰ï¼‰ï¼Œä¸€å€‹å„²å­˜æ¶ˆè²»ç´€éŒ„ã€‚

### Q: å¦‚ä½•æ›´æ–° Apps Scriptï¼Ÿ
ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œï¼š**éƒ¨ç½²** â†’ **ç®¡ç†éƒ¨ç½²ä½œæ¥­** â†’ âœï¸ **ç·¨è¼¯** â†’ ç‰ˆæœ¬é¸ã€Œæ–°ç‰ˆæœ¬ã€â†’ **éƒ¨ç½²**

### Q: æ¸…é™¤è³‡æ–™å¾Œé é¢æ²’åæ‡‰ï¼Ÿ
å·²ä¿®æ­£æ­¤å•é¡Œï¼Œæœƒè‡ªå‹•è·³è½‰åˆ°åˆå§‹è¨­å®šé é¢ã€‚

### Q: å¯ä»¥èª¿æ•´é€šè†¨ç‡å’Œå ±é…¬ç‡å—ï¼Ÿ
å¯ä»¥ï¼åœ¨è¨­å®šé é¢çš„ã€Œè¨ˆç®—åƒæ•¸ã€å€å¡Šå¯ä»¥è‡ªè¨‚ã€‚

### Q: å¦‚ä½•è‡ªè¨‚åˆ†é¡ï¼Ÿ
åœ¨ã€Œè¨­å®šã€â†’ã€Œåˆ†é¡ç®¡ç†ã€å¯ä»¥æ–°å¢ã€ç·¨è¼¯ã€éš±è—åˆ†é¡ã€‚

### Q: å¿«é€Ÿè¨˜å¸³æŒ‰éˆ•å¦‚ä½•è¨­å®šï¼Ÿ
åœ¨ã€Œè¨­å®šã€â†’ã€Œå¿«æ·éµè¨­å®šã€å¯ä»¥è‡ªè¨‚å¸¸ç”¨çš„å¿«é€Ÿè¨˜å¸³é …ç›®ã€‚

### Q: ç©åˆ†å’Œé“å…·æœƒåŒæ­¥åˆ°é›²ç«¯å—ï¼Ÿ
æœƒï¼æ‰€æœ‰ç©åˆ†ã€é“å…·ã€æŒ‘æˆ°é€²åº¦éƒ½æœƒè‡ªå‹•åŒæ­¥åˆ° Google Sheetsã€‚

### Q: æ¸¬è©¦å¦‚ä½•åŸ·è¡Œï¼Ÿ
```bash
npm test  # åŸ·è¡Œå…¨éƒ¨ 120 å€‹æ¸¬è©¦
npm test -- settingsSystem  # åªåŸ·è¡Œè¨­å®šç³»çµ±æ¸¬è©¦
npm test -- categorySystem  # åªåŸ·è¡Œåˆ†é¡ç³»çµ±æ¸¬è©¦
```

---

## ğŸ“„ License

MIT License

---

> ã€Œæ¯ä¸€åˆ†éŒ¢éƒ½æ˜¯ä½ æœªä¾†è‡ªç”±çš„ç£šå¡Šã€ğŸ§±
> ã€Œè®“ç†è²¡æˆç‚ºä¸€ç¨®æ¨‚è¶£ï¼Œè€Œéè² æ“”ã€ğŸ®

Made with â¤ï¸ for financial freedom

**v3.2 é‡é»ï¼šéŠæˆ²åŒ– Ã— ç³»çµ±åŒ– Ã— å¯æ“´å±•æ€§**
